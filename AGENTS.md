Display Featured (Pinned) Posts on Profile Pages: Now integrate the pinning so that the chosen featured posts actually show up at the top of a profile. In the profile feed component (src/components/app/profile/ProfileFeed.tsx), we currently take the first post in the list as pinned
github.com
, which was a placeholder approach. Change this logic to use the actual featured data: for a user profile, find if any post is marked as featured by that user; for a collective profile, do the same. A straightforward way: when querying posts for a profile page, fetch the featured one separately. For instance, in users/[userId]/page.tsx, after fetching profile info, get the featured post:
If using is_featured flag: query .from('posts').select(*).eq('author_id', userId).eq('is_featured', true).single() to get the featured post (if any).
If using a featured_posts join table: query that table for user_id = userId to get the featured post_id, then select that post.
If a user/collective can have at most one pinned post, this yields either one or none.
Once you have the featured post (let’s call it pinnedPost), fetch the rest of the posts as usual (but exclude the pinned one from the main list). For example, if using is_featured, do one query for pinned, and another query for other posts with .neq('id', pinnedPost.id) (also applying the public/subscriber filter as appropriate). Similarly for collectives: check if the collective has a featured post (maybe a field collectives.featured_post_id or via posts.is_featured with collective_id filter) and fetch accordingly. Then adjust ProfileFeed: pass the pinnedPost separately as a prop or simply ensure it’s the first element in the posts array as we do now. If you pass it separately, you can simplify ProfileFeed to place that post in the highlighted section. For instance, instead of using categorized[0] blindly
github.com
, provide pinnedPost prop and use that.
In the UI, render the pinned post distinctively. The current ProfileFeed simply shows the pinned post in a larger card at the top
github.com
. Continue that approach – it already takes the first post and wraps it in an extra <div className="mb-6"> to emphasize it. We’ll now be sure that “first post” is actually the intended featured one. You might add a small label like “Featured” above it for clarity, or a pin icon, though that’s optional. Also ensure micro-posts (the microthread panel on the right) remain unaffected
github.com
. For collectives, apply the same concept in their page: if a collective has a pinned post, show it first. This may mean adjusting [collectiveSlug]/page.tsx to handle featured logic similarly and then perhaps reuse ProfileFeed for rendering (passing appropriate props).
By doing this, we ensure the featured content chosen by the creator is always showcased. This change should not break anything – if no post is featured, the logic can fall back to the existing behavior (or simply no pinned section). Testing: Pin a post via the dashboard, then visit the profile – that post should appear at top even if it’s not the most recent. Unpin it, refresh – it should drop back into chronological order. The profile feed is now fully aligned with the new featured posts capability.
