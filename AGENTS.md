Introduce Floating Formatting Toolbar in Post Editor
Files: src/components/editor/plugins/FloatingFormatToolbar.tsx (new plugin), src/components/editor/PostEditor.tsx
Action: Implement a contextual formatting toolbar that appears when users select text, similar to Medium’s or Notion’s floating toolbar. Create a new Lexical plugin (e.g. FloatingFormatToolbarPlugin) that uses the editor’s selection state to conditionally render a small bubble menu. It should mount a <div> with formatting buttons (Bold, Italic, Quote, Link, etc.) near the selected text. Utilize Lexical’s APIs: on every selection change, check if there is a range selection ($isRangeSelection) and not collapsed, then calculate the selection DOM position to absolutely position the toolbar. You can use a React useEffect on Lexical’s SELECTION_CHANGE_COMMAND or polling via registerUpdateListener. For buttons, reuse existing UI components: e.g., import the Bold/Italic icons from Lucide (already used in the main Toolbar
github.com
) and perhaps the same commands (FORMAT_TEXT_COMMAND for bold/italic, TOGGLE_LINK_COMMAND for links).
Action: Ensure the floating toolbar is styled and integrated with the theme. The toolbar bubble should use the same design tokens – for example, className="bg-card shadow-md p-1 rounded flex" for a subtle gray background with rounded corners, and use the Button component or similar styles for each icon button (small icon variant). Include a small caret or arrow pointing down to the text (optional, purely visual). The toolbar should fade in/out or scale for a smooth UX (use Tailwind transitions or the animate plugin classes for opacity). For accessibility, this toolbar should not steal focus (users can continue typing), but the buttons should be keyboard-accessible when the toolbar is focused (if a user presses Tab after selecting text, focus could move into the toolbar). Give it aria-label="Text formatting options" and each button an aria-label (already provided via the title prop in Toolbar code).
Action: Register this plugin in the editor. In PostEditor.tsx, import and include <FloatingFormatToolbarPlugin /> inside the <LexicalComposer> alongside existing plugins (e.g., right after the existing <FloatingLinkEditorPlugin />
github.com
). This ensures it’s active whenever the editor is loaded.
Intent & Impact: This change brings a modern UX pattern to the editor: when users highlight text, a contextual menu appears, making formatting options immediately available at the cursor. This is a high-performance pattern seen in editors like Medium (select-to-format) that keeps the UI minimal until needed. The expected result is a more intuitive editing experience – users can format text on the fly without moving the mouse to the top toolbar, and the interface remains uncluttered. Combined with the existing fixed toolbar for block-level actions, this floating toolbar makes the editing process feel more fluid and professional.
