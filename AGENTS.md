Refine Slash Command Menu UI & Accessibility
Files: src/components/editor/plugins/SlashMenuPlugin.tsx
Action: Restyle the slash ‚Äú/‚Äù command menu to match the theme and improve usability. Currently, the menu‚Äôs container is a fixed-position white box with a red border (likely a temporary style)
github.com
. Update this to use design token classes: for example, className="fixed z-50 bg-popover text-foreground border border-border shadow rounded-md p-1 max-w-sm" ref={menuRef}. This will give it a neutral background that auto-adjusts for dark mode (Tailwind‚Äôs bg-popover and border-border use CSS variables for light/dark
github.com
) instead of hard-coded white. Remove the red outline. Ensure the width is sufficient but not overly rigid ‚Äì you can use max-w-sm and w-full so it adapts to content up to a limit instead of always 16rem.
Action: Add visual highlight for the selected option and improve keyboard navigation cues. The plugin already listens for arrow key commands to move selection and Enter/Escape to choose or cancel. Introduce a state or variable for the currently highlighted index, and apply a highlight style to that item‚Äôs element. For example, when rendering the list of options (SLASH_OPTIONS), if an item is the active one, give it a class like bg-accent text-accent-foreground or at least bg-muted to indicate focus. Also consider adding small icons to each option for quicker scanning (e.g., a paragraph icon, heading icon, image icon, etc., using Lucide or custom SVGs) ‚Äì this mirrors Notion‚Äôs slash menu which shows an icon for each block type. If SLASH_OPTIONS doesn‚Äôt already carry icon info, you can map labels to icons (for example, ‚ÄúImage‚Äù option gets a üñºÔ∏è icon). This is a UX enhancement that makes the menu feel more polished.
Action: Improve ARIA roles for the menu. Wrap the options in a semantic container: e.g., <ul role="listbox"> for the menu, and <li role="option"> for each item. If using divs, you can still apply role="option" and aria-selected={true/false} on the active element. Add aria-label="Insert block menu" or similar on the menu container for screen reader context. Manage focus appropriately: when the menu opens, you might programmatically focus the container so that arrow key events are captured (since you‚Äôre likely intercepting them at the editor level, this may not be necessary). Ensure that pressing Escape not only closes the menu (which it does via command) but also returns focus to the editor. These ARIA improvements align with the accessibility goal of the platform
github.com
, making the slash menu usable for all users.
Intent & Impact: The slash command menu will become more user-friendly and accessible. Visually, it will blend with the app‚Äôs UI (no jarring styles), and the active selection will be clearly indicated, much like menus in other applications. Users can navigate the menu with arrow keys confidently, seeing which item is highlighted, and they‚Äôll benefit from the contextual icons and descriptions (e.g., ‚ÄúTweet ‚Äì Insert a tweet embed‚Äù). Screen reader users will get appropriate feedback due to proper roles. All of this makes the editor‚Äôs advanced features (embeds, special blocks) easier to discover and use, bringing the experience closer to that of Notion or Substack‚Äôs editors where slash commands are smooth and intuitive.
