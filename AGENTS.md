Step 1: Establish the (public) group and migrate public pages
Scope: Create a new route group for public-facing content and move all unauthenticated or general pages into it. This includes the landing page, public profile pages, collective pages, and any publicly accessible post view. We will also introduce a dedicated layout for this group to encapsulate the common site header and footer.
Affected Files:
Create src/app/(public)/layout.tsx and move the landing page from src/app/page.tsx to src/app/(public)/page.tsx. Similarly, move src/app/profile/[username], src/app/collectives/[slug], and any other public pages (e.g. a discover or search page if present) into the (public) folder, preserving their sub-paths. For example, src/app/collectives/[slug]/page.tsx becomes src/app/(public)/collectives/[slug]/page.tsx.
In the new (public)/layout.tsx, include the site-wide navigation bar and footer that were previously in the root layout. The current RootLayout defines a <header> with the brand and <Navbar /> for all pages
github.com
 – we will relocate this into the public layout so it only renders for public pages. The footer component (if any) should also be moved here.
Update import paths as needed due to file moves (Next.js will handle route changes automatically since grouping directories in parentheses do not affect the URL). Remove the now-unnecessary references in src/app/layout.tsx to <Navbar> and <Footer> so that the root layout becomes a minimal shell (it will still contain the <ThemeProvider>, smooth scroll, etc., but no page-specific chrome).
Test Updates: Adjust any tests that explicitly depend on the presence of the header/footer in these pages. For example, if there are unit tests or snapshots expecting the <Navbar> on the landing page, they should be updated to render via the new public layout or modified to not assume the root layout has a nav. End-to-end tests that load the landing page or a collective page should continue to pass since the URLs haven’t changed (e.g. the landing page is still / and a collective page is still /collectives/[slug]). We should run the test suite to ensure nothing breaks due to the file moves. In case any e2e test was relying on an element like the “Sign In” button in the old global nav on a public page, verify that it’s still present via the (public) layout’s header.
Expected Outcome: All general-audience pages are neatly organized under (public) with a shared layout. The site’s header and footer are no longer duplicated in every page or intermingled with other contexts – they render through (public)/layout.tsx for public routes only. The root layout is slimmer (just global providers and styles), and conditional logic that was hiding the header on certain pages is gone. The app’s main pages (home, collective, profile, etc.) should look and behave the same as before, and all tests should still pass. This lays the groundwork for separate layouts in other route groups without altering user-facing URLs or design.
